(function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],d=0,v=[];d<o.length;d++)r=o[d],i[r]&&v.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(v.length)v.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/cnode-demo/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},"24d9":function(t,e,a){"use strict";var s=a("f15f"),i=a.n(s);i.a},3112:function(t,e,a){"use strict";var s=a("ca72"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("5c07"),a("53da"),a("2556"),a("d0f8");var s=a("6e6d"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-app",[a("Header"),a("v-content",[a("router-view")],1),a("BottomNavigation")],1)],1)},n=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-navigation-drawer",{attrs:{"mini-variant":t.mini,absolute:"",light:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{staticClass:"pa-1"},[t.mini?a("v-list-tile",{on:{click:function(e){e.stopPropagation(),t.mini=!t.mini}}},[a("v-list-tile-action",[a("v-icon",[t._v("chevron_right")])],1)],1):t._e(),a("v-list-tile",{attrs:{avatar:"",tag:"div"}},[a("v-list-tile-avatar",[a("img",{attrs:{src:"https://randomuser.me/api/portraits/men/85.jpg"}})]),a("v-list-tile-content",[a("v-list-tile-title",[t._v("John Leider")])],1),a("v-list-tile-action",[a("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.mini=!t.mini}}},[a("v-icon",[t._v("chevron_left")])],1)],1)],1)],1),a("v-list",{staticClass:"pt-0",attrs:{dense:""}},[a("v-divider",{attrs:{light:""}}),t._l(t.items,function(e){return a("v-list-tile",{key:e.title},[a("v-list-tile-action",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.title))])],1)],1)})],2)],1),a("v-toolbar",{attrs:{app:"",dark:"",color:"cyan"}},[t.isTopic?a("v-btn",{attrs:{icon:""},on:{click:t.goBack}},[a("v-icon",{attrs:{dark:""}},[t._v("arrow_back")])],1):a("v-avatar",{attrs:{size:45,color:"grey lighten-4"}},[a("img",{attrs:{src:"https://vuetifyjs.com/apple-touch-icon-180x180.png",alt:"avatar"}})]),a("v-toolbar-title",{staticClass:"white--text"},[t._v(t._s(t.title))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",disabled:""}},[a("v-icon",[t._v("more_vert")])],1)],1)],1)},o=[],l={data:function(){return{drawer:null,items:[{title:"Home",icon:"dashboard"},{title:"About",icon:"question_answer"}],mini:!1,right:null}},computed:{isTopic:function(){return"/content"==this.$route.path},title:function(){return-1==this.$route.path.indexOf("/user/")?this.$store.state.titleMap.get(this.$route.path):this.$store.state.titleMap.get("/user")}},methods:{goBack:function(){this.isTopic&&this.$router.go(-1)}}},c=l,u=a("17cc"),d=a("13d6"),v=a.n(d),f=a("451d"),h=a("93b3"),p=a("2f01"),b=a("43b3"),m=a("4e72"),g=a("3f81"),_=a("c572"),j=a("519c"),y=a("ade0"),k=a("ba65"),T=a("e396"),x=a("c419"),V=a("db97"),w=Object(u["a"])(c,r,o,!1,null,null,null),L=w.exports;v()(w,{VAvatar:f["a"],VBtn:h["a"],VDivider:p["a"],VIcon:b["a"],VList:m["a"],VListTile:g["a"],VListTileAction:_["a"],VListTileAvatar:j["a"],VListTileContent:y["a"],VListTileTitle:y["c"],VNavigationDrawer:k["a"],VSpacer:T["a"],VToolbar:x["a"],VToolbarTitle:V["a"]});var C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-bottom-nav",{attrs:{value:t.bottomNav,fixed:""},on:{change:t.handleChange}},[a("v-layout",{attrs:{"justify-space-between":""}},[a("v-btn",{attrs:{color:"teal",flat:"",value:"home",to:"/"}},[a("span",[t._v("首页")]),a("v-icon",[t._v("home")])],1),a("v-btn",{attrs:{color:"teal",flat:"",value:"publish",to:"/publish"}},[a("span",[t._v("发布")]),a("v-icon",[t._v("publish")])],1),a("v-btn",{attrs:{color:"teal",flat:"",value:"messages",to:"/messages"}},[a("span",[t._v("消息")]),a("v-icon",[t._v("message")])],1),a("v-btn",{attrs:{color:"teal",flat:"",value:"person",to:"/person"}},[a("span",[t._v("我的")]),a("v-icon",[t._v("person")])],1)],1)],1)],1)},$=[],S={data:function(){return{}},computed:{bottomNav:function(){return this.$store.state.tabValue}},methods:{handleChange:function(t){this.$store.dispatch("changeTabValue",t)}}},M=S,z=a("4a2b"),O=a("d2be"),P=a("99db"),A=Object(u["a"])(M,C,$,!1,null,null,null),I=A.exports;v()(A,{VBottomNav:z["a"],VBtn:h["a"],VCard:O["a"],VIcon:b["a"],VLayout:P["a"]});var U={name:"App",components:{BottomNavigation:I,Header:L},data:function(){return{}}},H=U,D=a("608c"),q=a("f8e6"),N=Object(u["a"])(H,i,n,!1,null,null,null),B=N.exports;v()(N,{VApp:D["a"],VContent:q["a"]});var R=a("5a4b"),Y=a("a7ee");a("9289");s["default"].use(Y["a"],{iconfont:"md"});var E=a("8548"),F=a.n(E),J=a("1e6f"),G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.toast?a("v-toast",{staticStyle:{bottom:"50%","text-align":"center"},attrs:{message:t.toastMsg},on:{close:t.hideToast}}):t._e(),a("v-tabs",{attrs:{color:"cyan","fixed-tabs":"",dark:"","slider-color":"yellow"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-layout",{attrs:{"justify-space-between":""}},t._l(t.items,function(e,s){return a("v-tab",{key:s,attrs:{ripple:""},on:{change:function(a){return t.handleTabChange(e.tag)}}},[t._v(t._s(e.title))])}),1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-card",[a("v-list",{attrs:{subheader:"","two-line":""}},t._l(t.topics,function(e,s){return a("div",{key:s,attrs:{avatar:""}},[a("router-link",{staticStyle:{"text-decoration":"none",color:"#000"},attrs:{to:{path:"/content",query:{id:e.id}}}},[a("v-list-tile",[a("v-list-tile-avatar",[a("img",{attrs:{src:e.author.avatar_url}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.title)}}),a("span",[a("v-icon",{attrs:{small:""}},[t._v("person")]),t._v("\r\n                       "+t._s(e.author.loginname)+"    \r\n                      "),a("v-icon",{attrs:{small:""}},[t._v("remove_red_eye")]),t._v("\r\n                       "+t._s(e.visit_count)+" / \r\n                      "),a("v-icon",{attrs:{small:""}},[t._v("comment")]),t._v("\r\n                       "+t._s(e.reply_count)+"\r\n                    ")],1)],1),a("v-list-tile-action",[a("span",[t._v(t._s(t._f("time_ago")(e.create_at,"YYYY-MM-DD HH:mm:ss")))])])],1)],1),a("v-divider")],1)}),0)],1)],1)],1),a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"text-xs-center text-md-center",staticStyle:{"padding-top":"20px","padding-bottom":"80px"},attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"0"}},[a("v-progress-circular",{attrs:{size:50,color:"cyan",indeterminate:""}})],1)],1)},K=[],Q={components:{},data:function(){return{items:[{tag:"all",title:"全部"},{tag:"good",title:"精华"},{tag:"share",title:"分享"},{tag:"ask",title:"问答"},{tag:"job",title:"招聘"}],activeTab:"all",page:1,toastMsg:"",toast:!1,topics:null,scroller:null,loading:!1,refreshing:!1,active:null,busy:!1}},mounted:function(){this.$store.dispatch("changeTabValue","首页"),this.scroller=this.$el,this.getTopics("all")},methods:{handleTabChange:function(t){this.loading=!1,this.activeTab=t,this.getTopics()},getTopics:function(){this.page=1;var t=this.$store.state.svrUrl+"topics?tab="+this.activeTab+"&page="+this.page,e=this;e.refreshing=!0,this.$ajax.get(t).then(function(t){200==t.status?(e.topics=[],e.topics=t.data.data):e.showToast("获取数据失败，请稍后重试"),e.refreshing=!1}).catch(function(t){console.log(t),e.refreshing=!1})},loadMore:function(){var t=this;this.page++;var e=this.$store.state.svrUrl+"topics?tab="+this.activeTab+"&page="+this.page;this.busy=!0;var a=this;a.loading=!0,setTimeout(function(){t.$ajax.get(e).then(function(t){200==t.status?a.topics=a.topics.concat(t.data.data):(a.showToast("获取数据失败，请稍后重试"),a.page--),a.loading=!1}).catch(function(t){a.loading=!1,console.log(t),a.page--}),a.busy=!1},1e3)},showToast:function(t){var e=this;this.toastMsg=t,this.toast=!0,this.toastTimer&&clearTimeout(this.toastTimer),this.toastTimer=setTimeout(function(){e.toast=!1},1500)},hideToast:function(){this.toast=!1,this.toastTimer&&clearTimeout(this.toastTimer)},toUser:function(t){this.$router.push("/user/"+t)}}},W=Q,X=a("7034"),Z=a("bcf9"),tt=a("313e"),et=a("058e"),at=Object(u["a"])(W,G,K,!1,null,"719c42ae",null),st=at.exports;v()(at,{VCard:O["a"],VDivider:p["a"],VFlex:X["a"],VIcon:b["a"],VLayout:P["a"],VList:m["a"],VListTile:g["a"],VListTileAction:_["a"],VListTileAvatar:j["a"],VListTileContent:y["a"],VListTileTitle:y["c"],VProgressCircular:Z["a"],VTab:tt["a"],VTabs:et["a"]});var it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("main",[a("v-select",{attrs:{items:t.lists,label:"分类"}}),a("v-text-field",{attrs:{label:"标题",placeholder:"标题字数 10字以上"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),a("v-textarea",{attrs:{placeholder:"输入文本，支持markdown格式",solo:"",rows:5,underlineShow:!1},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),a("v-btn",{staticClass:"info",on:{click:t.pubTopic}},[t._v("发布话题")])],1),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("提示信息")]),a("v-card-text",[t._v("请先登录")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"cyan darken-1",flat:"flat",to:"/"}},[t._v("取消")]),a("v-btn",{attrs:{color:"cyan darken-1",flat:"flat",to:"/person"}},[t._v("确定")])],1)],1)],1)],1),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.publish,callback:function(e){t.publish=e},expression:"publish"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("提示信息")]),a("v-card-text",[t._v(t._s(t.tips))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat",to:"/"}},[t._v("好的")])],1)],1)],1)],1)],1)},nt=[],rt=a("ae4d"),ot=a.n(rt),lt={data:function(){return{accesstoken:"",list:0,lists:["分享","问答","招聘"],title:"",content:"",publish:!1,tips:"发布接口已关闭,请谅解！",tab:"",dialog:!0}},methods:{pubTopic:function(){if(0===this.list?this.tab="share":1===this.list?this.tab="ask":2===this.list&&(this.tab="job"),this.title.length>=10&&this.content&&this.accesstoken){var t=this;t.content=ot()(t.content),this.axios.post(this.$store.state.svrUrl+"topics",{accesstoken:t.accesstoken,title:t.title,tab:t.tab,content:t.content}).then(function(e){t.title="",t.content="",t.tips="发表成功！",t.publish=!0,setTimeout(function(){t.publish=!1},1500)}).catch(function(e){t.publish=!0})}else this.publish=!0},close:function(){this.publish=!1}},created:function(){this.accesstoken=localStorage.getItem("accesstoken"),this.accesstoken&&(this.dialog=!1)},mounted:function(){this.$store.dispatch("changeTabValue","发布")}},ct=lt,ut=(a("faa9"),a("b417")),dt=a("18e7"),vt=a("c2bc"),ft=a("63eb"),ht=a("decb"),pt=a("1c11"),bt=Object(u["a"])(ct,it,nt,!1,null,"16c3f220",null),mt=bt.exports;v()(bt,{VBtn:h["a"],VCard:O["a"],VCardActions:ut["a"],VCardText:ut["b"],VCardTitle:dt["a"],VDialog:vt["a"],VLayout:P["a"],VSelect:ft["a"],VSpacer:T["a"],VTextField:ht["a"],VTextarea:pt["a"]});var gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("v-tabs",{attrs:{color:"cyan",value:t.activeTab,grow:"",dark:"","slider-color":"yellow"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-layout",t._l(t.tabs,function(e,s){return a("v-tab",{key:s,attrs:{ripple:""},on:{change:function(a){return t.handleTabChange(e.tag)}}},[t._v(t._s(e.title))])}),1)],1),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("提示信息")]),a("v-card-text",[t._v("请先登录")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"cyan darken-1",flat:"flat",to:"/"}},[t._v("取消")]),a("v-btn",{attrs:{color:"cyan darken-1",flat:"flat",to:"/person"}},[t._v("确定")])],1)],1)],1)],1),t.accesstoken?a("v-layout",{directives:[{name:"show",rawName:"v-show",value:"unread"===t.activeTab,expression:"activeTab === 'unread'"}],attrs:{wrap:"",row:""}},t._l(t.unread_messages,function(e,s){return a("v-flex",{key:s,attrs:{xs3:"",sm3:""}},[a("v-card",[a("img",{attrs:{src:e.author.avatar_url,alt:"user"}}),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("p",{staticClass:"text-md-center"},[t._v(t._s(e.author.loginname))]),a("p",{staticClass:"text-md-center"},[t._v("来自：《"+t._s(e.topic.title)+"》")]),a("span",[t._v(t._s(t._f("time_ago")(e.reply.create_at)))])])]),a("v-card-actions",[a("v-btn",{attrs:{block:"",to:{path:"/content",query:{id:e.topic.id}},color:"info"}},[t._v("查看")])],1)],1)],1)}),1):t._e(),t.accesstoken?a("v-layout",{directives:[{name:"show",rawName:"v-show",value:"unread"===t.activeTab,expression:"activeTab === 'unread'"}],staticClass:"lists"},[a("v-flex",{attrs:{row:""}},[t.unread_messages.length?t._e():a("p",{staticClass:"text-md-center text-xs-center"},[t._v("暂无消息")])])],1):t._e(),t.accesstoken?a("v-layout",{directives:[{name:"show",rawName:"v-show",value:"readed"===t.activeTab,expression:"activeTab === 'readed'"}],attrs:{row:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-card",[a("v-list",{attrs:{subheader:"","two-line":""}},t._l(t.readed_messages,function(e,s){return a("div",{key:s},[a("v-list-tile",[a("v-list-tile-avatar",[a("img",{attrs:{src:e.author.avatar_url,alt:"user"}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.author.loginname)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.topic.title)}})],1),a("v-list-tile-action",[a("v-btn",{attrs:{block:"",to:{path:"/content",query:{id:e.topic.id}},color:"info"}},[t._v("查看")])],1)],1)],1)}),0)],1)],1)],1):t._e(),t.accesstoken?a("v-layout",{directives:[{name:"show",rawName:"v-show",value:"readed"===t.activeTab,expression:"activeTab === 'readed'"}],staticClass:"lists"},[a("v-flex",{attrs:{row:""}},[t.readed_messages.length?t._e():a("p",{staticClass:"text-md-center text-xs-center"},[t._v("暂无消息")])])],1):t._e()],1)},_t=[],jt={data:function(){return{dialog:!0,activeTab:"unread",active:null,accesstoken:"",count:null,tabs:[{tag:"unread",title:"未读消息"},{tag:"readed",title:"已读消息"}],unread_messages:[],readed_messages:[]}},methods:{handleTabChange:function(t){this.activeTab=t},getMessages:function(){var t=this,e=this.$store.state.svrUrl+"messages?accesstoken="+this.accesstoken;this.$ajax.get(e).then(function(e){t.unread_messages=e.data.data.hasnot_read_messages,t.readed_messages=e.data.data.has_read_messages}).catch(function(t){})},markdownChange:function(t){return ot()(t)}},created:function(){this.$store.dispatch("changeTabValue","消息"),this.accesstoken=localStorage.getItem("accesstoken"),this.accesstoken&&(this.dialog=!1,this.getMessages())}},yt=jt,kt=(a("3112"),Object(u["a"])(yt,gt,_t,!1,null,null,null)),Tt=kt.exports;v()(kt,{VBtn:h["a"],VCard:O["a"],VCardActions:ut["a"],VCardText:ut["b"],VCardTitle:dt["a"],VDialog:vt["a"],VFlex:X["a"],VLayout:P["a"],VList:m["a"],VListTile:g["a"],VListTileAction:_["a"],VListTileAvatar:j["a"],VListTileContent:y["a"],VListTileSubTitle:y["b"],VListTileTitle:y["c"],VSpacer:T["a"],VTab:tt["a"],VTabs:et["a"]});var xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLogin?a("main",[a("v-layout",{attrs:{row:"","justify-space-between":""}},[a("v-flex",{attrs:{shrink:""}},[a("img",{attrs:{src:t.user_info.avatar_url,alt:"user"}})]),a("v-flex",{attrs:{grow:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-card-text",[a("p",[t._v("用户名："+t._s(t.user_info.loginname))]),a("p",[t._v("积分："+t._s(t.user_info.score))]),a("p",[t._v("\n                注册时间："+t._s(t._f("time_ago")(t.user_info.create_at))+"\n                "),a("v-btn",{attrs:{color:"secondary"},on:{click:t.logout}},[t._v("退出登录")])],1)])],1)],1)],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-card",[a("v-list",[a("v-subheader",[t._v("最近创建的话题：")]),a("v-divider"),t._l(t.user_info.recent_topics,function(e,s){return a("v-layout",{key:s},[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("img",{attrs:{src:t.user_info.avatar_url}})]),a("router-link",{staticStyle:{"text-decoration":"none",color:"#000"},attrs:{to:{path:"/content",query:{id:e.id}}}},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.title)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.subtitle)}})],1)],1)],1)],1)}),a("v-subheader",[t._v("最近参与的话题：")]),a("v-divider"),t._l(t.user_info.recent_replies,function(e,s){return a("v-layout",{key:s},[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("img",{attrs:{src:t.user_info.avatar_url}})]),a("router-link",{staticStyle:{"text-decoration":"none",color:"#000"},attrs:{to:{path:"/content",query:{id:e.id}}}},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.title)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.subtitle)}})],1)],1)],1)],1)})],2)],1)],1),a("blockquote",{staticClass:"blockquote"},[t._v("Tips：Access Token的获取-需要现在web端登录CNode社区，然后进入设置页面，最底下会有Access Token！")])],1)],1):a("main",[a("v-container",{staticStyle:{"padding-top":"100px"},attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{counter:36,label:"Access Token",required:""},model:{value:t.userToken,callback:function(e){t.userToken=e},expression:"userToken"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{block:"",color:"info"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)],1)])},Vt=[],wt={data:function(){return{userToken:"",error:"",user:{},user_info:{},isLogin:!1}},computed:{},methods:{login:function(){if(36==this.userToken.length){this.error="";var t=this,e=this.$store.state.svrUrl+"accesstoken";this.$ajax.post(e,{accesstoken:t.userToken}).then(function(e){200==e.status&&e.data.success?(t.error="",localStorage.setItem("accesstoken",t.userToken),localStorage.setItem("loginname",e.data.loginname),t.isLogin=!0,t.getUserInfo()):t.error="请输入正确的Access Token"}).catch(function(t){console.log(t),this.error="请输入正确的Access Token"})}else this.error="请输入正确的Access Token"},getUserInfo:function(){var t=this,e=this.$store.state.svrUrl+"/user/"+localStorage.getItem("loginname");this.$ajax.get(e).then(function(e){200==e.status?t.user_info=e.data.data:console.log(e.status)}).catch(function(t){console.log(t)})},logout:function(){localStorage.setItem("accesstoken",""),localStorage.setItem("user_id",""),localStorage.setItem("loginname",""),this.isLogin=!1}},mounted:function(){this.$store.dispatch("changeTabValue","我的"),this.userToken=localStorage.getItem("accesstoken"),this.isLogin=36==localStorage.getItem("accesstoken").length,this.isLogin&&this.getUserInfo()}},Lt=wt,Ct=a("86aa"),$t=a("ec30"),St=Object(u["a"])(Lt,xt,Vt,!1,null,"4c453d9a",null),Mt=St.exports;v()(St,{VBtn:h["a"],VCard:O["a"],VCardText:ut["b"],VContainer:Ct["a"],VDivider:p["a"],VFlex:X["a"],VLayout:P["a"],VList:m["a"],VListTile:g["a"],VListTileAvatar:j["a"],VListTileContent:y["a"],VListTileSubTitle:y["b"],VListTileTitle:y["c"],VSubheader:$t["a"],VTextField:ht["a"]});var zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("header",{staticClass:"md_header"},[a("h2",[t.data.top?a("span",{staticClass:"tag"},[t._v("置顶")]):t.data.good?a("span",{staticClass:"tag"},[t._v("精华")]):t._e(),t._v("\n      "+t._s(t.data.title)+"\n    ")]),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs8:"",sm4:""}},[a("span",[a("v-avatar",{attrs:{size:"22"}},[a("img",{attrs:{src:t.data.author.avatar_url}})]),t._v("\n          "+t._s(t.data.author.loginname)+" \n        ")],1),a("span",[t._v("发布于 "+t._s(t._f("time_ago")(t.data.create_at,"YYYY-MM-DD HH:mm:ss"))+"  ")]),a("span",[t._v(t._s(t.data.visit_count)+"次浏览 ")])]),a("v-flex",{attrs:{xs4:"",sm8:""}},[a("span",[t.accesstoken?a("v-checkbox",{attrs:{label:t.favorite_txt},on:{change:t.favorTopic},model:{value:t.favorite,callback:function(e){t.favorite=e},expression:"favorite"}}):t._e()],1)])],1)],1),a("article",{staticClass:"md_content",domProps:{innerHTML:t._s(t.data.content)}}),t.data.replies.length?a("v-layout",{staticStyle:{"padding-bottom":"60px"}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-list",{attrs:{subheader:""}},[a("v-subheader",{attrs:{inset:""}},[t._v(t._s(t.data.replies.length)+"条回复")]),t._l(t.data.replies,function(e,s){return a("div",{key:s},[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("router-link",{attrs:{to:"/user/"+e.author.loginname,src:e.author.avatar_url,tag:"img",alt:"user"}})],1),a("v-list-tile-content",[a("span",[t._v(t._s(e.author.loginname)+"  ")]),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.content)}})],1),a("v-list-tile-action",[e.ups.length&&!t.accesstoken?a("v-btn",{attrs:{icon:"",ripple:""},on:{click:function(e){return t.like(s)}}},[a("v-icon",{attrs:{small:"",color:"grey lighten-1"}},[t._v("thumb_up")]),a("span",[t._v(t._s(e.ups.length))])],1):t._e(),t.accesstoken?a("v-btn",{attrs:{icon:"",ripple:""},on:{click:function(e){return t.like(s)}}},[a("v-icon",{attrs:{small:"",color:"grey lighten-1"}},[t._v("thumb_up")]),a("span",[t._v(t._s(e.ups.length))])],1):t._e()],1)],1),a("v-divider")],1)})],2),a("p",{staticClass:"text-md-center text-xs-center",staticStyle:{"padding-top":"1rem"}},[t._v("已经到底了啊")])],1)],1):t._e(),a("v-container",{staticStyle:{"padding-bottom":"100px",display:"none"},attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-subheader",[t._v("添加回复")]),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{placeholder:"请输入回复内容..",outline:"",name:"input-7-4"},model:{value:t.reply,callback:function(e){t.reply=e},expression:"reply"}}),a("v-btn",{attrs:{color:"info"},on:{click:t.submit_reply}},[t._v("回复")])],1)],1)],1)],1)},Ot=[],Pt=(a("7415"),{data:function(){return{accesstoken:"",data:{author:{},replies:{}},favorite:!1,single_reply:"",reply:"",tips:"",showReplyDialog:!1}},computed:{favorite_txt:function(){return this.favorite?"取消收藏":"收藏"}},methods:{getTopic:function(){var t=this.$route.query.id,e=this;e.data.loading=!0;var a=this.$store.state.svrUrl+"/topic/"+t;this.$ajax.get(a).then(function(t){e.data=t.data.data,e.data.replies.map(function(t){t.reply_show=!1,t.cteate_at=moment(t.cteate_at,"YYYYMMDD").fromNow()})}).catch(function(t){}),this.accesstoken&&this.isFavorited()},open:function(){this.dialog=!0},close:function(){this.dialog=!1,this.showReplyDialog=!1},submit_reply:function(){if(this.reply&&this.reply.length>0){var t=this.$route.query.id,e=this;this.$ajax.post(this.$store.state.svrUrl+"topic/"+t+"/replies",{accesstoken:e.accesstoken,content:e.reply}).then(function(t){200==t.status&&1==t.data.success?(e.showReplyMsg(e,"回复成功"),e.getTopic(),e.reply=""):e.showReplyMsg(e,"回复失败，请确认无误后再试")}).catch(function(t){e.showReplyMsg(e,"回复失败，请确认无误后再试")})}else this.showReplyMsg(this,"请输入回复内容...")},favorTopic:function(){var t=this.$route.query.id,e=this,a=this.favorite?"collect":"de_collect";this.$ajax.post(this.$store.state.svrUrl+"topic_collect/"+a,{accesstoken:e.accesstoken,topic_id:t})},isFavorited:function(){var t=this;this.$ajax.get(this.$store.state.svrUrl+"topic_collect/"+t.loginname).then(function(e){var a=e.data.data,s=t.data.id;a.find(function(e){e.id===s&&(t.favorite=!0)})})},like:function(t){var e=this;this.$ajax.post(this.$store.state.svrUrl+"reply/"+e.data.replies[t].id+"/ups",{accesstoken:e.accesstoken}).then(function(a){a.data.error_msg?e.showReplyMsg(e,a.data.error_msg):"down"==a.data.action?e.data.replies[t].ups.splice(0,1):e.data.replies[t].ups.push("-1")})},showReplyToComment:function(t,e){this.single_reply=e?"@"+this.data.replies[t].author.loginname+" ":"";var a=this.data.replies;a[t].reply_show=e,this.$set(a,t,a[t])},replyToComment:function(t){var e=this.$route.query.id,a=this;this.$ajax.post(this.$store.state.svrUrl+"topic/"+e+"/replies",{accesstoken:a.accesstoken,content:a.single_reply,reply_id:t.id}).then(function(t){a.showReplyMsg(a,"回复成功"),a.getTopic(),a.single_reply=""}).catch(function(t){a.showReplyMsg(a,"回复失败，请确认无误后重试")})},showReplyMsg:function(t,e){t.tips=e,t.showReplyDialog=!0,setTimeout(function(){t.showReplyDialog=!1},1500)}},created:function(){this.accesstoken=localStorage.getItem("accesstoken"),this.loginname=localStorage.getItem("loginname"),this.getTopic()}}),At=Pt,It=(a("24d9"),a("6e60")),Ut=Object(u["a"])(At,zt,Ot,!1,null,"0d667b5a",null),Ht=Ut.exports;v()(Ut,{VAvatar:f["a"],VBtn:h["a"],VCheckbox:It["a"],VContainer:Ct["a"],VDivider:p["a"],VFlex:X["a"],VIcon:b["a"],VLayout:P["a"],VList:m["a"],VListTile:g["a"],VListTileAction:_["a"],VListTileAvatar:j["a"],VListTileContent:y["a"],VListTileSubTitle:y["b"],VSubheader:$t["a"],VTextarea:pt["a"]});var Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("main",[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{shrink:"","justify-space-around":""}},[a("img",{attrs:{src:t.user_info.avatar_url,alt:"user"}})]),a("v-flex",{attrs:{grow:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-card-text",[a("p",[t._v("用户名："+t._s(t.user_info.loginname))]),a("p",[t._v("积分："+t._s(t.user_info.score))]),a("p",[t._v("注册时间："+t._s(t._f("time_ago")(t.user_info.create_at))+"\r\n                "),a("v-btn",{attrs:{color:"secondary"},on:{click:t.logout}},[t._v("退出登录")])],1)])],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-card",[a("v-list",[a("v-subheader",[t._v("最近创建的话题：")]),a("v-divider"),t._l(t.user_info.recent_topics,function(e,s){return a("v-layout",{key:s},[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("img",{attrs:{src:t.user_info.avatar_url}})]),a("router-link",{staticStyle:{"text-decoration":"none",color:"#000"},attrs:{to:{path:"/content",query:{id:e.id}}}},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.title)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.subtitle)}})],1)],1)],1)],1)}),a("v-subheader",[t._v("最近参与的话题：")]),a("v-divider"),t._l(t.user_info.recent_replies,function(e,s){return a("v-layout",{key:s},[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("img",{attrs:{src:t.user_info.avatar_url}})]),a("router-link",{staticStyle:{"text-decoration":"none",color:"#000"},attrs:{to:{path:"/content",query:{id:e.id}}}},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.title)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.subtitle)}})],1)],1)],1)],1)})],2)],1)],1)],1)],1)])},qt=[],Nt={data:function(){return{user_info:{}}},methods:{getUser:function(){var t=this,e=(this.$route.query.user,"https://cnodejs.org/api/v1"+this.$route.path);this.$ajax.get(e).then(function(e){t.user_info=e.data.data})},goBack:function(){this.$router.go(-1)},logout:function(){localStorage.setItem("accesstoken",""),localStorage.setItem("user_id",""),localStorage.setItem("loginname",""),this.isLogin=!1}},created:function(){this.getUser()}},Bt=Nt,Rt=Object(u["a"])(Bt,Dt,qt,!1,null,"611f9cbd",null),Yt=Rt.exports;v()(Rt,{VBtn:h["a"],VCard:O["a"],VCardText:ut["b"],VDivider:p["a"],VFlex:X["a"],VLayout:P["a"],VList:m["a"],VListTile:g["a"],VListTileAvatar:j["a"],VListTileContent:y["a"],VListTileSubTitle:y["b"],VListTileTitle:y["c"],VSubheader:$t["a"]}),s["default"].use(J["a"]);var Et=[{path:"/",name:"Home",component:st},{path:"/publish",name:"Publish",component:mt},{path:"/messages",name:"Messages",component:Tt},{path:"/person",name:"Person",component:Mt},{path:"/content",name:"Content",component:Ht},{path:"/user/:id",name:"User",component:Yt}],Ft=new J["a"]({routes:Et}),Jt=Ft,Gt=(a("f91a"),a("6bf2")),Kt=a.n(Gt),Qt={install:function(t,e){t.filter("datefmt",function(t,e){return Kt()(t).format(e)}),t.filter("time_ago",function(t,e){return Kt.a.locale("zh-cn"),Kt()(t,e).fromNow()}),t.filter("tab",function(t){return"share"===t?"分享":"ask"===t?"问答":"job"===t?"招聘":void 0}),t.filter("comment",function(t){return t.replace('<a href="/user','<a href="#/user')})}},Wt=(a("612f"),a("b5ad"),a("981d"),a("591a")),Xt=a("2919"),Zt=Object(Xt["a"])({},"changeTabValue",function(t,e){t.tabValue=e}),te=Object(Xt["a"])({},"changeTabValue",function(t,e){var a=t.commit;a("changeTabValue",e)});s["default"].use(Wt["a"]);var ee=[["/","Vue.js中文社区"],["/publish","发布"],["/messages","消息中心"],["/person","个人中心"],["/content","阅读帖子"],["/login","登录"],["/user","用户信息"]],ae={svrUrl:"https://cnodejs.org/api/v1/",titleMap:new Map(ee),tabValue:"首页"},se=new Wt["a"].Store({state:ae,mutations:Zt,actions:te}),ie=a("7f43"),ne=a.n(ie),re=a("8445"),oe=a.n(re),le=a("75ba"),ce=a.n(le);a("6ca7"),a("e08c");s["default"].use(F.a,{iconfont:"mdi",theme:{primary:oe.a.purple,secondary:oe.a.grey.darken1,accent:oe.a.shades.black,error:oe.a.red.accent3}}),s["default"].use(R["a"]),s["default"].use(J["a"]),s["default"].use(Qt),s["default"].use(ce.a),s["default"].config.productionTip=!1,s["default"].prototype.$ajax=ne.a,new s["default"]({router:Jt,store:se,render:function(t){return t(B)}}).$mount("#app")},"77d2":function(t,e,a){var s={"./af":"fbac","./af.js":"fbac","./ar":"f96f","./ar-dz":"e63c","./ar-dz.js":"e63c","./ar-kw":"b7bd","./ar-kw.js":"b7bd","./ar-ly":"968f","./ar-ly.js":"968f","./ar-ma":"9f9d","./ar-ma.js":"9f9d","./ar-sa":"aea5","./ar-sa.js":"aea5","./ar-tn":"d44b","./ar-tn.js":"d44b","./ar.js":"f96f","./az":"c7ed","./az.js":"c7ed","./be":"5a28","./be.js":"5a28","./bg":"1251","./bg.js":"1251","./bm":"2809","./bm.js":"2809","./bn":"b4fc","./bn.js":"b4fc","./bo":"5484","./bo.js":"5484","./br":"5adc","./br.js":"5adc","./bs":"ac10","./bs.js":"ac10","./ca":"e381","./ca.js":"e381","./cs":"aef2","./cs.js":"aef2","./cv":"6566","./cv.js":"6566","./cy":"1390","./cy.js":"1390","./da":"1ece","./da.js":"1ece","./de":"5f10","./de-at":"09c4","./de-at.js":"09c4","./de-ch":"89a2","./de-ch.js":"89a2","./de.js":"5f10","./dv":"e662","./dv.js":"e662","./el":"196b","./el.js":"196b","./en-SG":"0a32","./en-SG.js":"0a32","./en-au":"94ed","./en-au.js":"94ed","./en-ca":"2806","./en-ca.js":"2806","./en-gb":"b0dd","./en-gb.js":"b0dd","./en-ie":"7a6e","./en-ie.js":"7a6e","./en-il":"1f0f","./en-il.js":"1f0f","./en-nz":"1606","./en-nz.js":"1606","./eo":"f214","./eo.js":"f214","./es":"7d58","./es-do":"737b","./es-do.js":"737b","./es-us":"a894","./es-us.js":"a894","./es.js":"7d58","./et":"a888","./et.js":"a888","./eu":"1357","./eu.js":"1357","./fa":"0a48","./fa.js":"0a48","./fi":"c2b1","./fi.js":"c2b1","./fo":"52c4","./fo.js":"52c4","./fr":"04e6","./fr-ca":"6ad1","./fr-ca.js":"6ad1","./fr-ch":"b12f","./fr-ch.js":"b12f","./fr.js":"04e6","./fy":"ad13","./fy.js":"ad13","./ga":"369e","./ga.js":"369e","./gd":"22de","./gd.js":"22de","./gl":"f808","./gl.js":"f808","./gom-latn":"50d5","./gom-latn.js":"50d5","./gu":"e67a","./gu.js":"e67a","./he":"037c","./he.js":"037c","./hi":"3d53","./hi.js":"3d53","./hr":"678b","./hr.js":"678b","./hu":"1783","./hu.js":"1783","./hy-am":"2873","./hy-am.js":"2873","./id":"de99","./id.js":"de99","./is":"6aa2","./is.js":"6aa2","./it":"1f93","./it-ch":"2db9","./it-ch.js":"2db9","./it.js":"1f93","./ja":"6bf8","./ja.js":"6bf8","./jv":"6e55","./jv.js":"6e55","./ka":"e65f","./ka.js":"e65f","./kk":"7167","./kk.js":"7167","./km":"4668","./km.js":"4668","./kn":"e3d2","./kn.js":"e3d2","./ko":"b058","./ko.js":"b058","./ku":"017e","./ku.js":"017e","./ky":"b2bd","./ky.js":"b2bd","./lb":"e50c","./lb.js":"e50c","./lo":"ca14","./lo.js":"ca14","./lt":"3e84","./lt.js":"3e84","./lv":"ce1d","./lv.js":"ce1d","./me":"9d38","./me.js":"9d38","./mi":"3e2e","./mi.js":"3e2e","./mk":"d532","./mk.js":"d532","./ml":"db61","./ml.js":"db61","./mn":"7493","./mn.js":"7493","./mr":"52d8","./mr.js":"52d8","./ms":"b559","./ms-my":"7462","./ms-my.js":"7462","./ms.js":"b559","./mt":"c055","./mt.js":"c055","./my":"49e0","./my.js":"49e0","./nb":"eb1c","./nb.js":"eb1c","./ne":"0acb","./ne.js":"0acb","./nl":"7497","./nl-be":"3114","./nl-be.js":"3114","./nl.js":"7497","./nn":"9a9c","./nn.js":"9a9c","./pa-in":"c595","./pa-in.js":"c595","./pl":"801c","./pl.js":"801c","./pt":"5b08","./pt-br":"155f","./pt-br.js":"155f","./pt.js":"5b08","./ro":"05fc","./ro.js":"05fc","./ru":"90b3","./ru.js":"90b3","./sd":"99bf","./sd.js":"99bf","./se":"20d6","./se.js":"20d6","./si":"7c0b","./si.js":"7c0b","./sk":"90fc","./sk.js":"90fc","./sl":"871b","./sl.js":"871b","./sq":"b045","./sq.js":"b045","./sr":"ac81","./sr-cyrl":"a2d0","./sr-cyrl.js":"a2d0","./sr.js":"ac81","./ss":"b093","./ss.js":"b093","./sv":"12e5","./sv.js":"12e5","./sw":"38a0","./sw.js":"38a0","./ta":"a462","./ta.js":"a462","./te":"18cb","./te.js":"18cb","./tet":"0c11","./tet.js":"0c11","./tg":"d707","./tg.js":"d707","./th":"883f","./th.js":"883f","./tl-ph":"6cc0","./tl-ph.js":"6cc0","./tlh":"ab53","./tlh.js":"ab53","./tr":"e523","./tr.js":"e523","./tzl":"b192","./tzl.js":"b192","./tzm":"5604","./tzm-latn":"9f95","./tzm-latn.js":"9f95","./tzm.js":"5604","./ug-cn":"9f4f","./ug-cn.js":"9f4f","./uk":"8bd6","./uk.js":"8bd6","./ur":"9a78","./ur.js":"9a78","./uz":"4d4c","./uz-latn":"da73","./uz-latn.js":"da73","./uz.js":"4d4c","./vi":"b766","./vi.js":"b766","./x-pseudo":"2a69","./x-pseudo.js":"2a69","./yo":"fd2e","./yo.js":"fd2e","./zh-cn":"35d0","./zh-cn.js":"35d0","./zh-hk":"7b45","./zh-hk.js":"7b45","./zh-tw":"fa66","./zh-tw.js":"fa66"};function i(t){var e=n(t);return a(e)}function n(t){var e=s[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="77d2"},8289:function(t,e,a){},ca72:function(t,e,a){},f15f:function(t,e,a){},faa9:function(t,e,a){"use strict";var s=a("8289"),i=a.n(s);i.a}});
//# sourceMappingURL=app.8b3979aa.js.map